import{x as g}from"./escape-BzMRIbCp.js";function S(e){var t,r,a,n,i,l,d;const o=(t=e.meta)===null||t===void 0?void 0:t.title,u=(r=e.meta)===null||r===void 0?void 0:r.creator,s=(a=e.meta)===null||a===void 0?void 0:a.source,c=(i=(n=e.meta)===null||n===void 0?void 0:n.license)===null||i===void 0?void 0:i.url,m=I(e);return!o&&!u&&!s&&!c&&!m?"":'<metadata xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/"><rdf:RDF><rdf:Description>'+(o?`<dc:title>${g(o)}</dc:title>`:"")+(u?`<dc:creator>${g(u)}</dc:creator>`:"")+(s?`<dc:source xsi:type="dcterms:URI">${g((d=(l=e.meta)===null||l===void 0?void 0:l.source)!==null&&d!==void 0?d:"")}</dc:source>`:"")+(c?`<dcterms:license xsi:type="dcterms:URI">${g(c)}</dcterms:license>`:"")+(m?`<dc:rights>${g(m)}</dc:rights>`:"")+"</rdf:Description></rdf:RDF></metadata>"}function I(e){var t,r,a,n,i,l,d,o,u,s,c,m,$,x,f;let v=!((t=e.meta)===null||t===void 0)&&t.title?`„${(r=e.meta)===null||r===void 0?void 0:r.title}”`:"Design",R=`„${(n=(a=e.meta)===null||a===void 0?void 0:a.creator)!==null&&n!==void 0?n:"Unknown"}”`;!((i=e.meta)===null||i===void 0)&&i.source&&(v+=` (${e.meta.source})`);let b="";return((d=(l=e.meta)===null||l===void 0?void 0:l.license)===null||d===void 0?void 0:d.name)!=="MIT"&&((o=e.meta)===null||o===void 0?void 0:o.creator)!=="DiceBear"&&(!((u=e.meta)===null||u===void 0)&&u.title)&&(b+="Remix of "),b+=`${v} by ${R}`,!((c=(s=e.meta)===null||s===void 0?void 0:s.license)===null||c===void 0)&&c.name&&(b+=`, licensed under „${($=(m=e.meta)===null||m===void 0?void 0:m.license)===null||$===void 0?void 0:$.name}”`,!((f=(x=e.meta)===null||x===void 0?void 0:x.license)===null||f===void 0)&&f.url&&(b+=` (${e.meta.license.url})`)),b}const y=-2147483648,B=2147483647;function k(e){return e^=e<<13,e^=e>>17,e^=e<<5,e}function M(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0,t=k(t);return t}function p(e=""){e=e.toString();let t=M(e)||1;const r=()=>t=k(t),a=(n,i)=>Math.floor((r()-y)/(B-y)*(i+1-n)+n);return{seed:e,next:r,bool(n=50){return a(1,100)<=n},integer(n,i){return a(n,i)},pick(n,i){var l;return n.length===0?(r(),i):(l=n[a(0,n.length-1)])!==null&&l!==void 0?l:i},shuffle(n){const i=p(r().toString()),l=[...n];for(let d=l.length-1;d>0;d--){const o=i.integer(0,d);[l[d],l[o]]=[l[o],l[d]]}return l},string(n,i="abcdefghijklmnopqrstuvwxyz1234567890"){const l=p(r().toString());let d="";for(let o=0;o<n;o++)d+=i[l.integer(0,i.length-1)];return d}}}function h(e){let t=e.attributes.viewBox.split(" "),r=parseInt(t[0]),a=parseInt(t[1]),n=parseInt(t[2]),i=parseInt(t[3]);return{x:r,y:a,width:n,height:i}}function z(e,t,r,a,n){let{width:i,height:l,x:d,y:o}=h(e);const u=`<rect fill="${t}" width="${i}" height="${l}" x="${d}" y="${o}" />`;switch(a){case"solid":return u+e.body;case"gradientLinear":return`<rect fill="url(#backgroundLinear)" width="${i}" height="${l}" x="${d}" y="${o}" /><defs><linearGradient id="backgroundLinear" gradientTransform="rotate(${n} 0.5 0.5)"><stop stop-color="${t}"/><stop offset="1" stop-color="${r}"/></linearGradient></defs>`+e.body}}function j(e,t){let{width:r,height:a,x:n,y:i}=h(e),l=t?(t-100)/100:0,d=(r/2+n)*l*-1,o=(a/2+i)*l*-1;return`<g transform="translate(${d} ${o}) scale(${t/100})">${e.body}</g>`}function A(e,t,r){let a=h(e),n=(a.width+a.x*2)*((t??0)/100),i=(a.height+a.y*2)*((r??0)/100);return`<g transform="translate(${n} ${i})">${e.body}</g>`}function D(e,t){let{width:r,height:a,x:n,y:i}=h(e);return`<g transform="rotate(${t}, ${r/2+n}, ${a/2+i})">${e.body}</g>`}function X(e){let{width:t,x:r}=h(e);return`<g transform="scale(-1 1) translate(${t*-1-r*2} 0)">${e.body}</g>`}function L(e,t){let{width:r,height:a,x:n,y:i}=h(e),l=t?r*t/100:0,d=t?a*t/100:0;return`<mask id="viewboxMask"><rect width="${r}" height="${a}" rx="${l}" ry="${d}" x="${n}" y="${i}" fill="#fff" /></mask><g mask="url(#viewboxMask)">${e.body}</g>`}function T(e){const t={xmlns:"http://www.w3.org/2000/svg",...e.attributes};return Object.keys(t).map(r=>`${g(r)}="${g(t[r])}"`).join(" ")}function U(e){const t=p(Math.random().toString()),r={};return e.body.replace(/(id="|url\(#)([a-z0-9-_]+)([")])/gi,(a,n,i,l)=>(r[i]=r[i]||t.string(8),`${n}${r[i]}${l}`))}const Y={properties:{seed:{type:"string"},flip:{type:"boolean",default:!1},rotate:{type:"integer",minimum:0,maximum:360,default:0},scale:{type:"integer",minimum:0,maximum:200,default:100},radius:{type:"integer",minimum:0,maximum:50,default:0},size:{type:"integer",minimum:1},backgroundColor:{type:"array",items:{type:"string",pattern:"^(transparent|[a-fA-F0-9]{6})$"}},backgroundType:{type:"array",items:{type:"string",enum:["solid","gradientLinear"]},default:["solid"]},backgroundRotation:{type:"array",items:{type:"integer",minimum:-360,maximum:360},default:[0,360]},translateX:{type:"integer",minimum:-100,maximum:100,default:0},translateY:{type:"integer",minimum:-100,maximum:100,default:0},clip:{type:"boolean",default:!0},randomizeIds:{type:"boolean",default:!1}}};function w(e){var t;let r={},a=(t=e.properties)!==null&&t!==void 0?t:{};return Object.keys(a).forEach(n=>{let i=a[n];typeof i=="object"&&i.default!==void 0&&(Array.isArray(i.default)?r[n]=[...i.default]:typeof i.default=="object"?r[n]={...i.default}:r[n]=i.default)}),r}function C(e,t){var r;let a={...w(Y),...w((r=e.schema)!==null&&r!==void 0?r:{}),...t};return JSON.parse(JSON.stringify(a))}function _(e){return e==="transparent"?e:`#${e}`}function F(e,t,r){var a;let n=e.shuffle(t);n.length<=1||t.length==2&&r=="gradientLinear"?(n=t,e.next()):n=e.shuffle(t),n.length===0&&(n=["transparent"]);const i=n[0],l=(a=n[1])!==null&&a!==void 0?a:n[0];return{primary:_(i),secondary:_(l)}}function J(e,t={}){var r,a,n,i,l;t=C(e,t);const d=p(t.seed),o=e.create({prng:d,options:t}),u=d.pick((r=t.backgroundType)!==null&&r!==void 0?r:[],"solid"),{primary:s,secondary:c}=F(d,(a=t.backgroundColor)!==null&&a!==void 0?a:[],u),m=d.integer(!((n=t.backgroundRotation)===null||n===void 0)&&n.length?Math.min(...t.backgroundRotation):0,!((i=t.backgroundRotation)===null||i===void 0)&&i.length?Math.max(...t.backgroundRotation):0);t.size&&(o.attributes.width=t.size.toString(),o.attributes.height=t.size.toString()),t.scale!==void 0&&t.scale!==100&&(o.body=j(o,t.scale)),t.flip&&(o.body=X(o)),t.rotate&&(o.body=D(o,t.rotate)),(t.translateX||t.translateY)&&(o.body=A(o,t.translateX,t.translateY)),s!=="transparent"&&c!=="transparent"&&(o.body=z(o,s,c,u,m)),(t.radius||t.clip)&&(o.body=L(o,(l=t.radius)!==null&&l!==void 0?l:0)),t.randomizeIds&&(o.body=U(o));const $=T(o),x=S(e),f=`<svg ${$}>${x}${o.body}</svg>`;return{toString:()=>f,toJson:()=>{var v;return{svg:f,extra:{primaryBackgroundColor:s,secondaryBackgroundColor:c,backgroundType:u,backgroundRotation:m,...(v=o.extra)===null||v===void 0?void 0:v.call(o)}}},toDataUri:()=>`data:image/svg+xml;utf8,${encodeURIComponent(f)}`}}export{J as createAvatar,Y as schema};
